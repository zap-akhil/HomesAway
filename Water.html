<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<meta charset="UTF-8">
	<title>3D Water Tank</title>
</head>
<body>
<style>
.wrap{
	font-family: Roboto;
	text-align: center;
}
.tank{
	margin:0 50px;
	display: inline-block;
}
body{
	/*background: #eee;*/
	margin: 0;
}
</style>
<div class="wrap">
	<div class="tank waterTankHere1"></div>
	<div class="tank waterTankHere2"></div>
</div>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="/js/waterTank.js"></script>
<script>
setInterval(function() {
	  // Gets ADC value at every one second
	  GetADC();
	}, 1000);
	
	
function getADC() {
	  var xhttp = new XMLHttpRequest();
          var adc=0;
	  xhttp.onreadystatechange = function() {
	    if (this.readyState == 4 && this.status == 200) {
		adc = Number(this.responseText);
	    }
	  };
	  xhttp.open("GET", "/getADC", false);
	  xhttp.send();
	}
	
$(document).ready(function() {
	
	$('.waterTankHere1').waterTank({
		width: 420,
		height: 360,
		color: '#8bd0ec',
		level: adc
	}).on('click', function(event) {
		$(this).waterTank(Math.floor(Math.random() * 100) + 0 );
	});
  
	$('.waterTankHere2').waterTank({
		width: 420,
		height: 360,
		color: '#f00',
		level: 45
	}).on('click', function(event) {
		$(this).waterTank(Math.floor(Math.random() * 100) + 0 );
	});
  

});
</script>
</body>
</html>
